

* **Date : 2022-07-17**
* **Last Modified At : 2022-07-17**


# How to Install Kali Linux in Window 10 using WSL2

요즘 C언어나 Fortran 또는 linux 같은 컴퓨터 역사의 초기 자료들에 관심이 많이 생기고 있다. 딱히 대단한 이유로 관심이 생긴 것은 아니고, 그냥 멋있어 보여서 그렇다. 이놈의 힙스터 기질이 또 다시 몇년만에 고개를 들어서 결국 리눅스나 운영체제등에 관심이 마구 생기고 있다.

(해커 이미지, mr robot)


예전에도 몇번 연구용으로 Ubuntu Linux 20.04 LTS 버전을 사용한 적이 있었다. 멋없는 VMware로 가상환경으로도 해보고, 연구용 워크스테이션 서버에서 server용 리눅스도 다뤄봤는데, 뭔가 힙한 느낌이 살지 않았다. 특히 우분투 버전의 연분홍 배경화면은 도저히 컴덕의 감성을 만족시키지 못한다. 그래서 멋있지도 않고 힙하지 않은 원인이 뭘까 곰곰히 생각해봤더니.. 역시 딥다크한 느낌의 프로그래밍 감성이 없어서였다. 그래서 그런 감성이 있는 것을 찾아봤는데.. 역시 프로그래머의 딥다크한 이미지하면.. 영화에서 흔히 나오는 해커 이미지 아닌가?.. 그래서 해킹에 특화된 리눅스 버전을 찾아서 공부하면 되겠구나! 생각했다. 검색해보니 당연히 나처럼 생각한 사람들이 이미 그런것을 만들어두고 있었다! ㅋㅋㅋ (보통 이런게 있겠지? 생각하고 검색하면 반드시 인터넷상에 존재하고 있다.)

(칼리 리눅스 이미지 삽입)



현재 이 글을 쓰는 시점이 2022년 7월 17일 새벽 2시 50분인데, 이제 겨우 kali linux 설치에 성공하고 있다. 매우 감동적이므로(...) kali linux 설치가 완료되는 동안 이에 대한 간단한 글을 써보려고 한다. (맨날 정보글만 쓰다가 이렇게 간략한 글을 쓰니 펴 편하다 ㅎㅎ)



## WSL이란 무엇인가??

WSL이란 Windows Subsystem for Linux의 약자로, 말 그대로 리눅스에서 사용되는 여러 어플리케이션을 윈도우에서 서브시스템으로 사용할 수 있게 해주는 기능이다. 

일반인을 대상으로 하는 컴퓨터, 노트북의 운영체제는 마이크로소프트의 윈도우의 점유율이 압도적이지만, 컴퓨터로 먹고 사는 여러 연구원/개발자들이 사용하는 서버나 환경의 운영체제는 유닉스 계열의 리눅스나 맥 운영체제가 점유하고 있다.

마이크로소프트에서는 이런 면을 좋지 않게 생각한 것 같다. 시간이 지날수록 컴퓨터를 고수준으로 다루는 사용자와 그렇지 않은 일반사용자들간의 괴리가 커질 것이고, 결국에는 고전적인 유닉스 운영체제의 힘을 무시할 수 없을 것이라 생각한 것 같다. 상식적으로 생각하면, 일반 사용자를 위한 OS를 팔아서 먹고사는 회사안의 엔지니어들이 모두 상대진영의 OS를 쓴다면 뭔가 이상할 것같기도 하다. ㅋㅋ 그래서 나온 것이 바로 wsl이다. 

간단히 말하자면, 이제 WSL을 이용해 윈도우의 Microsoft Store에서 앱을 다운로드 받듯이, 여러 리눅스 계열 운영체제의 정보를 다운받아 설치하여 사용할 수 있다! 


## VMware하고 무엇이 다른가?

VM(Virtual Machine)은 결국 실제 물리적인 컴퓨터를 구성하는 하드웨어(CPU, GPU, RAM, Storage 등)을 컴퓨터 안에서 가상으로 구현하여 컴퓨터 안의 컴퓨터를 만드는 개념이다! 일반적으로 가상환경을 셋팅해주는 프로그램을 먼저 설치하여 실행하고, 그 프로그램 안에서 미리 다운받은 다른 운영체제의 이미지 등을 설치하여 제2, 제3의 운영체제를 가상환경 프로그램 안에서 사용할 수 있다.

그러나 VMware를 사용하게 되면 멋이 안난다.. 일단 윈도우 화면에서 가상환경 프로그램을 실행한 뒤, 그 안에서 가상환경 안에 설치된 리눅스를 부팅해야 하기 때문이다.

사용할 때마다 일일이 리눅스를 부팅해야 한다는 것도 귀찮은 일이다. 또한, 내 노트북의 성능문제인지는 모르겠지만, 리눅스 우분투를 vmware에서 설치하여 사용하면 일정기간 이후 굉장히 렉이 걸려서, 도저히 사용못할 수준이 되는 현상이 자주 발생했다. 그래서 연구용으로 사용하는 리눅스 서버를 제외하면, 내가 스스로 노트북에 설치한 리눅스는 한달도 지나지 않아, 가상환경 프로그램과 함께 통째로 삭제되는 일이 반복되었다.. (몇년에 한번씩 리눅스 힙스터 기질이 발동해서 설치하고, 한달 후 휴지통에 버리는 일이 반복되었다.)


## 설치 과정










## Kali-Linux GUI 설치

이제 설치를 다하면, Kali linux를 사용할 수 있게 된 것이다. 그러나 조금 밋밋한 것 같다. 왜냐하면 터미널만으로 존재하는 일종의 linux-server 버전만 설치되었기 때문이다. 아무리 리눅스 유저들이 터미널을 좋아한다고 하지만, 역시 GUI가 탑재된 배경화면이나 서비스가 있는 편이 좋다.

그래서 그것을 설치하기 위한 추가 작업이 필요하다. 다행히 kali linux 홈페이지에서는 wsl을 통해 GUI를 설치하는 방법을 소개하고 있다! GUI를 지원하는 프로그램 이름이 아마 Win-kEx인 것 같다. 

이를 다음과 같이 설치하자.

``` shell
kali@kali:~$ sudo apt update
kali@kali:~$
kali@kali:~$ sudo apt install -y kali-win-kex
```

여기서 sudo는 superuser do 라는 최상위권한 실행 명령어이다. 자세한 것을 몰라도 그냥 따라하면 된다.

이 명령을 실행하면, 이제 다음과 같이 엄청난 양의 GUI 구현을 위한 프로그램들이 설치되는 과정을 볼 수 있다. 좀 오래 걸리니 느긋하게 커피한잔 마시자. 

참고로 중간에 키보드 레이아웃을 지정해달라는 초록색 원시적인 화면이 뜰텐데, 맨 밑의 Other를 선택해주고, 국적을 Korean으로 한뒤에, 101-104 호환 키보드 옵션을 선택해주면 된다! 

차분하게 영어설명을 읽으면 어렵지 않게 할 수 있다.

키보드 레이아웃을 지정이 완료되면, 다시 남은 gui 설치를 하게 된다.



Kali linux 홈페이지 설명에 따르면, 다음과 같은 3가지 GUI를 사용할 수 있는 것 같다.

1. Window Mode
    이 모드는 아마도 가장 일반적인 칼리 리눅스의 GUI 바탕화면 같다. 연분홍 바탕화면의 우분투와는 차원이 다른 힙함이 느껴진다(..)

<img src='https://www.kali.org/docs/wsl/win-kex/win-kex.png'>

window mode를 sound support와 함께 열고 싶다면 다음 명령어를 실행하면 된다.

``` shell
kex --win -s
```

2. Enhanced Session Mode
    이 모드는 아마도 칼리 리눅스의 여러 보안/해킹 관련 기능을 적극적으로 쓸 수 있게 도와주는 모드 같다.

<img src='https://www.kali.org/docs/wsl/win-kex/win-kex-2.png'>

이 모드에 sound support와 arm workaround 옵션을 함께 실행하려면 다음과 같이 하면 된다.

``` shell
kex --esm --ip -s
```

3. Seamless mode
    이 모드는 일반적인 윈도우 바탕화면에서 칼리 리눅스의 여러 프로그램을 마치 윈도우 프로그램 실행하듯이 사용할 수 있는 모드이다. 리눅스 어플리케이션과 윈도우 사용자환경의 결합이라고 할 수 있는 부분이며, 아마 WSL 홍보에서도 이러한 측면을 강조했던 것 같다!
    간단히 칼리 리눅스 프로그램을 사용한다면 이 모드도 괜찮은 것 같다.

<img src='https://www.kali.org/docs/wsl/win-kex/win-kex-sl.png'>


sound support와 함께 이 모드를 사용하려면 다음 명령어를 사용하면 된다.

``` shell
kex --sl -s
```

이 모드들에 대한 자세한 설명은 [Win-KeX SL usage documentation](https://www.kali.org/docs/wsl/win-kex-sl/)에 자세히 나와있다.



## Reference

* https://www.kali.org/docs/wsl/win-kex/





























